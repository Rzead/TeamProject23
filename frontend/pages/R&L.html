<!DOCTYPE html>
<html lang="en">

<head>
  <title>Register&Login Page</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="../assets/css/R&L.css">
</head>

<body>
  <div class="shell">

    <div class="container_register_and_login container_a" id="register">
      <form action="" method="" class="form" id="register_form">
        <div class="icon_container">
          <img src="../ressources/images/companyIcon.png" alt="Company Icon" class="icon">
        </div>
        <h2 class="register_and_login_from_title title">Register</h2>
        <span class="form_span">Welcome to join our company, now please type your</span>
        <input type="text" class="form_input" placeholder="Name" required>
        <input type="text" class="form_input" placeholder="Email" id="register_Email" required>
        <input type="password" class="form_input" placeholder="Password" id="register_Password" required>
        <button type="submit" class="form_submit_button button">Register</button>
      </form>
    </div>

    <div class="container_register_and_login container_b" id="login">
      <form action="" method="post" class="form" id="login_form">
        <div class="icon_container">
          <img src="../../ressources/images/companyIcon.png" alt="Company Icon" class="icon">
        </div>
        <h2 class="register_and_login_from_title title">Login</h2>
        <span class="form_span">Welcome back!</span>
        <input type="text" class="form_input" placeholder="Email" id="login_Email" required>
        <input type="password" class="form_input" placeholder="Password" id="login_Password" required>
        <button type="submit" class="form_submit_button button">Login</button>
        <a href="#" class="forget_password_link">Forgot your password?</a>
      </form>
    </div>

    <!--Script for the login process-->
    <script>
      const form = document.getElementById('login_form');

      form.addEventListener('submit', function (event) {
        event.preventDefault();

        const email = document.getElementById('login_Email').value;
        const password = document.getElementById('login_Password').value;

        console.log("Entered email:", email);
        console.log("Entered password:", password);

        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        const passwordRegex = /^(?=.*[0-9])(?=.*[A-Z])(?=.*[!@#$%^&*])/;

        if (!email || !password) {
          alert('Both fields are required.');
          console.log("One of the fields is empty.");
          return;
        }

        if (!emailRegex.test(email) || !email.endsWith('@make-it-all.co.uk')) {
          alert('Invalid email format. It should be firstname.lastname@make-it-all.co.uk');
          console.log("Invalid email format.");
          return;
        }

        if (password === 'admin') {
          console.log("Correct password. Redirecting...");
          window.location.href = 'projects.html';
        } else {
          alert('Incorrect password. You should use "admin". ðŸ˜‰');
          console.log("Incorrect password.");
        }

        if (!passwordRegex.test(password)) {
          alert('Password must contain at least one number, one uppercase letter, and one special character.');
          console.log("Password does not meet complexity requirements.");
          return;
        }
        else {
          console.log("Correct password. Redirecting...");
          window.location.href = 'projects.html';
        }


      });
    </script>

    <script>
      const registerForm = document.getElementById('register_form');

      registerForm.addEventListener('submit', function (event) {
        event.preventDefault();
        console.log("test");

        const email = document.getElementById('register_Email').value;
        const password = document.getElementById('register_Password').value;

        console.log("Entered email:", email);
        console.log("Entered password:", password);

        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        const passwordRegex = /^(?=.*[0-9])(?=.*[A-Z])(?=.*[!@#$%^&*])/;

        if (!email || !password) {
          alert('Both fields are required.');
          console.log("One of the fields is empty.");
          return;
        }

        if (!emailRegex.test(email) || !email.endsWith('@make-it-all.co.uk')) {
          alert('Invalid email format. It should be firstname.lastname@make-it-all.co.uk');
          console.log("Invalid email format.");
          return;
        }

        if (!passwordRegex.test(password)) {
          alert('Password must contain at least one number, one uppercase letter, and one special character.');
          console.log("Password does not meet complexity requirements.");
          return;
        }

        alert('Registration successful!');
        console.log("Correct password. Redirecting...");
        window.location.href = 'projects.html';
        console.log("User registered successfully.");
      });
    </script>



    <div class="switch_login_and_register" id="switch_obj">
      <div class="switch_container" id="switch_a">
        <h2 class="switch_title title">Welcome back</h2>
        <h2 class="switch_title title">Our employee!</h2>
        <p class="switch_text">let's login and start working!</p>
        <button class="switch_section_button button">Login</button>
      </div>


      <div class="switch_container is-hidden" id="switch_b">
        <h2 class="switch_title title">Hello </h2>
        <h2 class="switch_title title"> new employee!</h2>
        <p class="switch_text">Go to register and join us!</p>
        <button class="switch_section_button button">Register</button>
      </div>
    </div>

  </div>

</body>



<script>


  // Varibles
  let switch_SLAR = document.querySelector("#switch_obj");
  let switch_a = document.querySelector("#switch_a");
  let switch_b = document.querySelector("#switch_b");
  let switch_btns = document.querySelectorAll(".switch_section_button");
  let a_con = document.querySelector("#register");
  let b_con = document.querySelector("#login");
  let submit_buttons = document.querySelectorAll(".form_submit_button");


  let getButtons = (e) => e.preventDefault();


  let changeForm = (e) => {

    switch_SLAR.classList.add("is-gx");
    setTimeout(function () {
      switch_SLAR.classList.remove("is-gx");
    }, 1500);

    switch_SLAR.classList.toggle("is-objr")
    switch_a.classList.toggle("is-hidden");
    switch_b.classList.toggle("is-hidden");

    a_con.classList.toggle("is-objl");
    b_con.classList.toggle("is-objl");
    b_con.classList.toggle("is-objz");
  };


  let shell = (e) => {
    for (let i = 0; i < submit_buttons.length; i++)
      //submit_buttons[i].addEventListener("click", getButtons); // Pierre: Don't understand the purpose of this line 
      for (let i = 0; i < switch_btns.length; i++)
        switch_btns[i].addEventListener("click", changeForm);
  };


  window.addEventListener("load", shell);


</script>


</html>