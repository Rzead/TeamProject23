<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Kanban Board</title>
  <link rel="stylesheet" href="./dist/jkanban.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" />

  <style>
    body {
      font-family: "Lato";
      margin: 0;
      padding: 0;
    }

    #myKanban {
      overflow-x: auto;
      padding: 20px 0;
    }

    /* Custom colors for the boards */
    .todo {
      background: #006400;
      /* Dark green */
    }

    .inprogress {
      background: #FFA500;
      /* Orange */
    }

    .totest {
      background: #FF1493;
      /* Deep pink */
    }

    .done {
      background: #800080;
      /* Purple */
    }

    .custom-button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 7px 15px;
      margin: 10px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
    }
  </style>
</head>

<body>
  <div id="myKanban"></div>
  <script src="./dist/jkanban.js"></script>
  <script>
    var KanbanTest = new jKanban({
      element: "#myKanban",
      gutter: "10px",
      widthBoard: "450px",
      itemHandleOptions: {
        enabled: true,
      },
      click: function (el) {
        console.log("Trigger on all items click!");
      },
      context: function (el, e) {
        console.log("Trigger on all items right-click!");
      },
      dropEl: function (el, target, source, sibling) {
        console.log(target.parentElement.getAttribute('data-id'));
        console.log(el, target, source, sibling)
      },
      buttonClick: function (el, boardId) {
        console.log(el);
        console.log(boardId);
        var formItem = document.createElement("form");
        formItem.setAttribute("class", "itemform");
        formItem.innerHTML =
          '<div class="form-group"><textarea class="form-control" rows="2" autofocus></textarea></div><div class="form-group"><button type="submit" class="btn btn-primary btn-xs pull-right">Submit</button><button type="button" id="CancelBtn" class="btn btn-default btn-xs pull-right">Cancel</button></div>';

        KanbanTest.addForm(boardId, formItem);
        formItem.addEventListener("submit", function (e) {
          e.preventDefault();
          var text = e.target[0].value;
          KanbanTest.addElement(boardId, {
            title: text
          });
          formItem.parentNode.removeChild(formItem);
        });
        document.getElementById("CancelBtn").onclick = function () {
          formItem.parentNode.removeChild(formItem);
        };
      },
      itemAddOptions: {
        enabled: true,
        content: '+ Add New Card',
        class: 'custom-button',
        footer: true
      },
      boards: [
        {
          id: "_todo",
          title: "Todo",
          class: "todo",
          dragTo: ["_inprogress"],
          item: [
            { title: "Sample To-Do Task" }
          ]
        },
        {
          id: "_inprogress",
          title: "In Progress",
          class: "inprogress",
          dragTo: ["_totest"],
          item: [
            { title: "Ongoing Task" }
          ]
        },
        {
          id: "_totest",
          title: "To Test",
          class: "totest",
          dragTo: ["_done"],
          item: [
            { title: "Test Task" }
          ]
        },
        {
          id: "_done",
          title: "Done",
          class: "done",
          item: [
            { title: "Completed Task" }
          ]
        }
      ]
    });

    // TODO Plug to to better buttons 
  //     <button id="addDefault">Add "Default" board</button>
  // <br />
  // <button id="addToDo">Add element in "To Do" Board</button>
  // <br />
  // <button id="addToDoAtPosition">Add element in "To Do" Board at position 2</button>
  // <br />
  // <button id="removeBoard">Remove "Done" Board</button>
  // <br />
  // <button id="removeElement">Remove "My Task Test"</button>
    // document.getElementById("addToDo").addEventListener("click", function () {
    //   KanbanTest.addElement("_todo", { title: "New To-Do Task" });
    // });

    // document.getElementById("addToDoAtPosition").addEventListener("click", function () {
    //   KanbanTest.addElement("_todo", { title: "Task at Pos 2" }, 1);
    // });

    // document.getElementById("addDefault").addEventListener("click", function () {
    //   KanbanTest.addBoards([
    //     {
    //       id: "_default",
    //       title: "Kanban Default",
    //       item: [
    //         { title: "Default Item 1" },
    //         { title: "Default Item 2" }
    //       ]
    //     }
    //   ]);
    // });

    // document.getElementById("removeBoard").addEventListener("click", function () {
    //   KanbanTest.removeBoard("_done");
    // });

    // document.getElementById("removeElement").addEventListener("click", function () {
    //   KanbanTest.removeElement("_test_delete");
    // });
  </script>
</body>

</html>